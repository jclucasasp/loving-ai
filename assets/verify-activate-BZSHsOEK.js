import{g as x,r as p,u as f,j as e,C as j,d as h,B as g,z as l,t as i,T as v}from"./index-BalaYzeo.js";import{V as T}from"./user-auth-api-fWlweBxj.js";import{u as y,t as b,F as P,a as F,b as O,c as I,d as C,e as S}from"./zod-D1BqhadI.js";import{I as L,a as c,b as s,c as N}from"./input-otp-OPTMaMp9.js";import{C as V}from"./component-heading-C0ydzzcL.js";import{L as A}from"./loader-circle-39Gm8SHc.js";const E=l.object({otp:l.string({required_error:"OTP is required"}).min(6,{message:"OTP must be at least 6 characters long"})});function k(){const d=x(),[o,n]=p.useState(!1),m=f(),r=y({resolver:b(E),defaultValues:{otp:""}}),u=async t=>{n(!0);const a=await T(d.userId,t.otp);if(a.status>=500){i({title:"Error verifying OTP.",description:"Please try again. If the problem persists, please email us on lovingaiteam@gmail.com.",variant:"destructive",action:e.jsx(v,{altText:"Retry",children:"Retry"}),duration:4e3});return}if(a.status>=400&&a.status<500){i({description:"Your OTP is either invalid or have expired.",variant:"destructive",duration:4e3});return}i({title:"OTP verified.",description:"Thank you for verifying your email address.",variant:"default",duration:4e3}),sessionStorage.clear(),n(!1),m("/login")};return e.jsxs("section",{className:"flex flex-col items-center justify-center",children:[e.jsx(V,{children:"Activate Your Account"}),e.jsx(j,{children:e.jsx(h,{className:"mt-3",children:e.jsx(P,{...r,children:e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:r.handleSubmit(u),children:[e.jsx(F,{name:"otp",control:r.control,render:({field:t})=>e.jsxs(O,{children:[e.jsx(I,{htmlFor:"otp",children:"Enter the OTP from your email"}),e.jsx(C,{children:e.jsxs(L,{maxLength:6,...t,children:[e.jsxs(c,{children:[e.jsx(s,{index:0}),e.jsx(s,{index:1}),e.jsx(s,{index:2})]}),e.jsx(N,{}),e.jsxs(c,{children:[e.jsx(s,{index:3}),e.jsx(s,{index:4}),e.jsx(s,{index:5})]})]})}),e.jsx(S,{})]})}),e.jsxs(g,{disabled:o,type:"submit",variant:"special",className:"border w-full rounded-full mt-6 p-2 gap-2",children:[o&&e.jsx("span",{children:e.jsx(A,{className:"h-4 w-4 animate-spin"})}),"Verify"]})]})})})})]})}export{k as default};
