import{g as B,u as M,r as m,j as e,C as R,d as V,B as P,e as O,i as F,t as j,T as u,k,s as D,l as G}from"./index-BBk-v4uc.js";import{G as _}from"./personality-api-BGyIbuxt.js";import{u as H,t as q,F as z,a as t,b as i,d as l,f as n,e as o}from"./zod-B8GwMsbf.js";import{T as J}from"./index-DuP46MEW.js";import{L as K}from"./user-auth-api-D1J6RmD5.js";import{I as d}from"./input-DBjIDQrj.js";import{S as T,a as N,b,c as v,d as h}from"./select-BjfCujpQ.js";import{C as Q}from"./component-heading-BwcwQDb0.js";import{L as C}from"./loader-circle-BWMZQt0x.js";import"./Combination-C3njWBqu.js";import"./component-B-25OoSd.js";function te(){const s=B(),p=M(),[x,f]=m.useState(!1),a=H({resolver:q(F),defaultValues:{userId:s==null?void 0:s.userId,firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,age:s==null?void 0:s.age,ethnicity:s==null?void 0:s.ethnicity,gender:s==null?void 0:s.gender,bio:s==null?void 0:s.bio,imageUrl:s==null?void 0:s.imageUrl,myersBriggsPersonalityType:s==null?void 0:s.myersBriggsPersonalityType,verified:s==null?void 0:s.verified}}),[L,S]=m.useState([]),w=async()=>await _(),E=async r=>{f(!0);const c=F.safeParse(r);if(!c.success){j({title:"Validation failed.",description:c.error.message,variant:"destructive",action:e.jsx(u,{altText:"Retry",children:"Retry"})});return}const Y=c.data,y=await k(G,"POST",Y);if(f(!1),y==null){console.error("Failed to update profile"),j({title:"Failed to update profile",description:"Failed to update profile",variant:"destructive",action:e.jsx(u,{altText:"Retry",children:"Retry"})});return}sessionStorage.clear(),D(y),p("/profile"),j({title:"Profile updated successfully",action:e.jsx(u,{altText:"Okay",children:"Okay"})})},A=async()=>{sessionStorage.clear(),await K(s.userId),p("/")};return m.useEffect(()=>{w().then(r=>{S(r)})},[]),e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:"User Profile"}),e.jsxs(R,{className:"w-full",children:[e.jsx(V,{children:e.jsx(z,{...a,children:e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:a.handleSubmit(E),children:[e.jsx(t,{control:a.control,name:"userId",render:({field:r})=>e.jsx(i,{children:e.jsx(l,{children:e.jsx(d,{type:"hidden",placeholder:s==null?void 0:s.userId,...r})})})}),e.jsx(t,{control:a.control,name:"firstName",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your first name"}),e.jsx(l,{children:e.jsx(d,{type:"text",placeholder:s==null?void 0:s.firstName,...r})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"lastName",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your last name"}),e.jsx(l,{children:e.jsx(d,{type:"text",placeholder:s==null?void 0:s.lastName,...r})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"age",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your age"}),e.jsx(l,{children:e.jsx(d,{type:"number",...r})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"ethnicity",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your ethnicity"}),e.jsx(l,{children:e.jsx(d,{type:"text",placeholder:s==null?void 0:s.ethnicity,...r})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"bio",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your bio"}),e.jsx(l,{children:e.jsx(J,{rows:5,placeholder:s==null?void 0:s.bio,...r})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"imageUrl",render:({field:r})=>e.jsxs(i,{hidden:!0,children:[e.jsx(n,{children:"Your image url"}),e.jsx(l,{children:e.jsx(d,{type:"text",placeholder:s==null?void 0:s.imageUrl,...r})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"gender",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your Gender"}),e.jsxs(T,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(l,{children:e.jsx(N,{className:"w-full",children:e.jsx(b,{})})}),e.jsxs(v,{children:[e.jsx(h,{value:"MALE",children:"MALE"}),e.jsx(h,{value:"FEMALE",children:"FEMALE"})]}),e.jsx(o,{})]})]})}),e.jsx(t,{control:a.control,name:"myersBriggsPersonalityType",render:({field:r})=>e.jsxs(i,{children:[e.jsx(n,{children:"Your Myers Briggs Personality Type"}),e.jsxs(T,{onValueChange:r.onChange,children:[e.jsx(l,{children:e.jsx(N,{className:"w-full",children:e.jsx(b,{placeholder:s==null?void 0:s.myersBriggsPersonalityType})})}),e.jsxs(v,{children:[L.map(c=>e.jsx(h,{value:c.type,children:c.type},c.id))," "]}),e.jsx(o,{})]})]})}),e.jsxs(P,{disabled:x,variant:"special",type:"submit",className:"mt-3 w-full rounded-full","aria-label":"Update profile",children:[x&&e.jsx("span",{children:e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"})}),"Update Profile"]})]})})}),e.jsx(O,{children:e.jsxs(P,{disabled:x,variant:"destructive",className:"w-full rounded-full",onClick:()=>A(),"aria-label":"Log out",children:[x&&e.jsx("span",{children:e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"})}),"Log Out"]})})]})]})}export{te as default};
